<!-- =========================
     logistics.html (FULL — SYNCED WITH INDEX + FEATURED)
     ✅ Same DB table as index: public.listings
     ✅ Featured badge + Featured-only filter
     ✅ Loads featured + sort_rank from DB
========================= -->
<!DOCTYPE html>
<html lang="en-NG" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

  <title>Logistics | Larmah Enterprise</title>
  <meta name="description" content="Trusted dispatch, pickups, haulage and logistics coordination across Nigeria — WhatsApp-first support with trackable references." />
  <meta name="keywords" content="Logistics Nigeria, Dispatch Lagos, Haulage Nigeria, Airport Pickup Lagos, Delivery Service Nigeria, Larmah Logistics" />
  <meta name="author" content="Larmah Enterprise" />
  <meta name="theme-color" content="#070A12" />
  <meta name="color-scheme" content="dark light" />
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://heylarmah.tech/logistics.html" />

  <meta property="og:type" content="website" />
  <meta property="og:locale" content="en_NG" />
  <meta property="og:url" content="https://heylarmah.tech/logistics.html" />
  <meta property="og:title" content="Larmah Logistics | Trusted Movement" />
  <meta property="og:description" content="Dispatch, pickups, haulage and coordination across Nigeria — WhatsApp-first support." />
  <meta property="og:image" content="https://heylarmah.tech/assets/images/larmah-header.jpeg" />
  <meta property="og:image:alt" content="Larmah Logistics — Trusted Movement" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Larmah Logistics" />
  <meta name="twitter:description" content="Dispatch, pickups, haulage and coordination — trust-first." />
  <meta name="twitter:image" content="https://heylarmah.tech/assets/images/larmah-header.jpeg" />

  <link rel="icon" href="assets/images/larmah-favicon.jpeg" type="image/jpeg" />
  <link rel="apple-touch-icon" href="assets/images/larmah-favicon.jpeg" />

  <link rel="preload" href="assets/images/larmah-favicon.jpeg" as="image" fetchpriority="high" />
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
  <link rel="preconnect" href="https://source.unsplash.com" crossorigin />
  <link rel="preconnect" href="https://images.unsplash.com" crossorigin />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

  <!-- ✅ Supabase + app.js (same config style as index/admin) -->
  <script>
    window.__SUPABASE_URL = "https://mskbumvopqnrhddfycfd.supabase.co";
    window.__SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1za2J1bXZvcHFucmhkZGZ5Y2ZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzMjA3ODYsImV4cCI6MjA4MTg5Njc4Nn0.68529BHKUz50dHP0ARptYC_OBXFLzpsvlK1ctbDOdZ4";
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script defer src="assets/js/app.js"></script>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"CollectionPage",
    "name":"Larmah Logistics",
    "url":"https://heylarmah.tech/logistics.html",
    "isPartOf":{"@type":"WebSite","name":"Larmah Enterprise","url":"https://heylarmah.tech/"},
    "about":{"@type":"Service","name":"Logistics & Dispatch (Trusted)","areaServed":"NG"}
  }
  </script>

  <style>
    :root{
      --gold:#D4AF37;
      --gold2:#F5D57A;
      --radius: 18px;
      --radius2: 22px;
      --max: 1120px;
      --ease: cubic-bezier(.2,.8,.2,1);
      --shadow: 0 18px 50px rgba(0,0,0,.42);
      --shadow2: 0 12px 34px rgba(0,0,0,.30);
    }

    html[data-theme="dark"]{
      --bg:#070A12;
      --bg2:#050810;
      --panel: rgba(255,255,255,.03);
      --panel2: rgba(255,255,255,.02);
      --line: rgba(255,255,255,.10);
      --line2: rgba(255,255,255,.08);
      --text:#E9EDF7;
      --muted: rgba(233,237,247,.72);
      --muted2: rgba(233,237,247,.60);
      --headerBg: rgba(7,10,18,.72);
      --overlayBg: rgba(0,0,0,.55);
      --ctaBg: rgba(0,0,0,.28);
      --ctaLine: rgba(255,255,255,.12);
      --good: rgba(0,217,129,.95);
      --bad: rgba(255,90,103,.95);
      --warn: rgba(255,187,0,.95);

      --logoGlow: 0 0 22px rgba(212,175,55,.14);
      --logoRing: rgba(255,255,255,.12);
      --logoBg: rgba(255,255,255,.03);

      --focus: rgba(245,213,122,.28);
    }

    html[data-theme="light"]{
      --bg:#F7F7FB;
      --bg2:#FFFFFF;
      --panel: rgba(10,14,26,.04);
      --panel2: rgba(10,14,26,.03);
      --line: rgba(10,14,26,.12);
      --line2: rgba(10,14,26,.08);
      --text:#0E1526;
      --muted: rgba(14,21,38,.68);
      --muted2: rgba(14,21,38,.56);
      --headerBg: rgba(255,255,255,.78);
      --overlayBg: rgba(0,0,0,.40);
      --ctaBg: rgba(255,255,255,.78);
      --ctaLine: rgba(10,14,26,.10);
      --good: rgba(0,140,90,.92);
      --bad: rgba(200,34,60,.90);
      --warn: rgba(180,110,0,.92);

      --shadow: 0 16px 46px rgba(0,0,0,.12);
      --shadow2: 0 10px 26px rgba(0,0,0,.10);

      --logoGlow: 0 0 0 rgba(0,0,0,0);
      --logoRing: rgba(10,14,26,.10);
      --logoBg: rgba(255,255,255,.65);

      --focus: rgba(212,175,55,.26);
    }

    *{ box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    @media (prefers-reduced-motion: reduce){
      html{ scroll-behavior:auto; }
      *{ animation:none !important; transition:none !important; }
    }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(900px 420px at 18% 6%, rgba(212,175,55,.10), transparent 60%),
        radial-gradient(900px 420px at 85% 10%, rgba(0,217,129,.06), transparent 62%),
        radial-gradient(900px 520px at 50% 110%, rgba(0,122,255,.06), transparent 58%),
        linear-gradient(180deg, var(--bg2), var(--bg));
      color: var(--text);
      overflow-x:hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    a{ color: var(--text); text-decoration:none; }
    a:hover{ color: var(--gold); }
    .container{ max-width: var(--max); margin: 0 auto; padding: 0 16px; }

    .skip{
      position:absolute; left:-999px; top:10px;
      padding:10px 12px;
      border-radius: 12px;
      background: var(--gold);
      color:#111;
      font-weight: 950;
      z-index: 999;
    }
    .skip:focus{ left: 12px; outline: none; }

    :focus-visible{
      outline: 2px solid var(--focus);
      outline-offset: 3px;
      border-radius: 12px;
    }

    /* Header */
    header{
      position:sticky; top:0; z-index:50;
      background: var(--headerBg);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--line2);
    }
    .header-inner{ display:flex; align-items:center; gap:12px; padding: 12px 0; }
    .brand{ display:flex; align-items:center; gap:10px; min-width: 220px; }

    .logo-wrap{
      position:relative;
      width:44px; height:44px;
      border-radius: 14px;
      padding: 2px;
      background:
        radial-gradient(18px 18px at 25% 20%, rgba(245,213,122,.35), transparent 70%),
        radial-gradient(20px 20px at 85% 80%, rgba(212,175,55,.22), transparent 70%),
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.02));
      box-shadow: var(--logoGlow);
      border: 1px solid var(--logoRing);
      flex: 0 0 auto;
      isolation:isolate;
    }
    .logo-wrap::after{
      content:"";
      position:absolute;
      inset:-10px;
      background: radial-gradient(16px 16px at 50% 50%, rgba(212,175,55,.10), transparent 70%);
      filter: blur(12px);
      opacity:.8;
      pointer-events:none;
      z-index:-1;
    }
    .logo-wrap img{
      width:100%; height:100%;
      object-fit: cover;
      display:block;
      border-radius: 12px;
      border: 1px solid var(--line2);
      background: var(--logoBg);
    }
    .brand .btxt{ display:flex; flex-direction:column; line-height:1.05; gap:4px; min-width:0; }
    .brand .bname{ font-weight: 950; letter-spacing:-0.2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .brand .bsub{ font-size:.86rem; color: var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    nav{ margin-left:auto; }
    nav ul{ display:flex; list-style:none; gap:18px; padding:0; margin:0; align-items:center; }
    .nav-link{
      color: var(--text);
      opacity:.9;
      font-weight: 850;
      font-size: .95rem;
      position:relative;
    }
    .nav-link:hover{ color: var(--gold); opacity:1; }
    .nav-link.active{ color: var(--gold); opacity:1; }
    .nav-link.active::after{
      content:"";
      position:absolute;
      left:0; right:0;
      bottom:-12px;
      height:2px;
      background: rgba(212,175,55,.65);
      border-radius: 999px;
    }

    .header-actions{ display:flex; gap:10px; align-items:center; margin-left: 10px; }
    .icon-btn{
      width: 42px; height: 42px;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: var(--panel);
      color: var(--text);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      transition: transform .16s var(--ease), filter .16s var(--ease);
    }
    .icon-btn:hover{ transform: translateY(-1px); filter: brightness(1.05); }
    .menu-btn{
      display:none;
      border: 1px solid var(--line);
      background: var(--panel);
      color: var(--text);
      border-radius: 12px;
      padding: 10px 12px;
      cursor:pointer;
    }
    @media (max-width: 980px){
      nav{ display:none; }
      .menu-btn{ display:inline-flex; align-items:center; justify-content:center; }
      .header-actions{ margin-left:auto; }
    }

    /* Mobile sheet */
    .overlay{
      position:fixed; inset:0;
      background: var(--overlayBg);
      display:none;
      align-items:flex-end;
      z-index:80;
    }
    .overlay.open{ display:flex; }
    .sheet{
      width:100%;
      border-radius: 18px 18px 0 0;
      border: 1px solid var(--line);
      background: color-mix(in oklab, var(--bg2) 82%, #000 18%);
      box-shadow: var(--shadow);
      padding: 14px;
    }
    .sheet-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--line2);
      margin-bottom: 10px;
      gap: 10px;
    }
    .sheet-brandline{ display:flex; align-items:center; gap:10px; min-width:0; }
    .sheet a{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid var(--line2);
      background: var(--panel2);
      color: var(--text);
      margin-bottom: 10px;
      font-weight: 900;
    }
    .sheet-actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 8px; }

    /* Buttons */
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      border-radius: 14px;
      padding: 12px 16px;
      min-height: 46px;
      border: 1px solid var(--line);
      background: var(--panel);
      color: var(--text);
      cursor:pointer;
      font-weight: 950;
      transition: transform .16s var(--ease), filter .16s var(--ease), background .16s var(--ease);
      white-space: nowrap;
      user-select:none;
      text-decoration:none;
    }
    .btn:hover{ transform: translateY(-1px); filter: brightness(1.03); }
    .btn:active{ transform: translateY(0); }
    .btn.solid{ background: var(--gold); color:#111; border-color: color-mix(in oklab, var(--gold) 55%, #000 45%); }
    .btn.primary{ background: var(--panel2); border-color: var(--line); }
    .btn.ghost{ background: transparent; border-color: var(--line2); }
    .btn.small{ min-height: 40px; padding: 10px 12px; border-radius: 12px; font-weight: 900; }

    /* Page */
    .page-wrap{ padding: 18px 0 0; }

    /* Hero */
    .hero{
      border-radius: var(--radius2);
      border: 1px solid var(--line);
      background: var(--panel2);
      box-shadow: var(--shadow);
      overflow:hidden;
      padding: 16px;
      position:relative;
      isolation:isolate;
    }
    .hero::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(380px 180px at 18% 0%, rgba(212,175,55,.20), transparent 60%),
        radial-gradient(420px 220px at 86% 12%, rgba(0,217,129,.12), transparent 65%),
        radial-gradient(520px 260px at 40% 105%, rgba(0,122,255,.10), transparent 62%);
      pointer-events:none;
      z-index:-1;
    }
    .hero-grid{ display:grid; gap: 14px; grid-template-columns: 1.05fr .95fr; align-items:start; }
    @media (max-width: 980px){ .hero-grid{ grid-template-columns: 1fr; } }

    .kicker{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; color: var(--muted); font-weight: 850; }
    .kicker .dot{ opacity:.65; }

    h1{
      margin: 6px 0 10px;
      font-size: clamp(2.0rem, 4vw, 2.8rem);
      line-height: 1.06;
      letter-spacing:-0.6px;
    }
    .gold{
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    .lead{ margin:0; color: var(--muted); font-size: 1.02rem; line-height: 1.55; }
    .hero-actions{ display:flex; gap:12px; flex-wrap:wrap; margin-top: 12px; }
    @media (max-width: 520px){ .hero-actions{ flex-direction:column; } .hero-actions .btn{ width:100%; } }

    .meta{ margin-top: 12px; color: var(--muted); font-size: .88rem; display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
    .pill{
      display:inline-flex; gap:8px; align-items:center;
      padding: 7px 10px; border-radius: 999px;
      border: 1px solid var(--line2); background: var(--panel2);
      color: color-mix(in oklab, var(--text) 80%, transparent);
      font-weight: 800; font-size:.84rem;
    }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace; }

    .hero-media{
      border-radius: 14px;
      overflow:hidden;
      border: 1px solid var(--line);
      background: var(--panel);
      position:relative;
      min-height: 320px;
      isolation:isolate;
    }
    .hero-media img{
      width:100%;
      height: 320px;
      object-fit: cover;
      display:block;
      opacity:.94;
      transform: scale(1.01);
      transition: opacity .55s var(--ease), transform .9s var(--ease);
    }
    .hero-media.is-fading img{ opacity:.18; transform: scale(1.03); }
    .hero-media .cap{
      position:absolute; left:16px; right:16px; bottom:12px;
      padding: 10px;
      border-radius: 12px;
      border: 1px solid var(--ctaLine);
      background: var(--ctaBg);
      backdrop-filter: blur(10px);
    }
    .hero-tag{ display:flex; gap:8px; align-items:center; font-weight: 950; margin-bottom: 6px; }
    .hero-sub{ color: color-mix(in oklab, var(--text) 86%, transparent); font-size: .92rem; line-height: 1.35; }
    .hero-progress{ position:absolute; left:0; right:0; bottom:0; height: 3px; background: color-mix(in oklab, var(--text) 10%, transparent); overflow:hidden; }
    .hero-bar{ height:100%; width:0%; background: rgba(212,175,55,.75); transition: width 5s linear; }
    .hero-bar.run{ width:100%; }

    /* Sections */
    .section{ padding: 18px 0; }
    .section-head{ display:flex; align-items:flex-end; justify-content:space-between; gap:12px; margin-bottom: 12px; flex-wrap:wrap; }
    h2{ margin:0; font-size: 1.35rem; letter-spacing:-0.3px; }
    .subhead{ color: var(--muted); margin: 4px 0 0; font-size: .98rem; line-height:1.4; }

    /* Filters */
    .filters{
      border-radius: var(--radius2);
      border: 1px solid var(--line);
      background: var(--panel2);
      box-shadow: var(--shadow2);
      padding: 14px;
      margin-bottom: 14px;
    }
    /* ✅ Featured filter added */
    .filters-grid{ display:grid; gap: 10px; grid-template-columns: 1.4fr 1fr 1fr 1fr 1fr; }
    @media (max-width: 980px){ .filters-grid{ grid-template-columns: 1fr 1fr; } }
    @media (max-width: 520px){ .filters-grid{ grid-template-columns: 1fr; } }

    .field{ display:flex; flex-direction:column; gap:6px; }
    label{ font-size: .78rem; letter-spacing: .12em; text-transform: uppercase; color: var(--muted2); }
    input, select, textarea{
      border-radius: 14px;
      border: 1px solid var(--line);
      background: var(--panel2);
      color: var(--text);
      padding: 12px;
      min-height: 46px;
      outline:none;
      font-family: inherit;
    }
    textarea{ min-height: 96px; resize: vertical; }
    input::placeholder, textarea::placeholder{ color: color-mix(in oklab, var(--muted2) 88%, transparent); }

    .pillbar{ display:flex; gap:8px; flex-wrap:wrap; padding-top: 12px; margin-top: 10px; border-top: 1px solid var(--line2); }

    /* Grid */
    .grid{ display:grid; gap: 14px; grid-template-columns: repeat(3, minmax(0, 1fr)); }
    @media (max-width: 1024px){ .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); } }
    @media (max-width: 640px){ .grid{ grid-template-columns: 1fr; } }

    .card{
      border-radius: var(--radius);
      border: 1px solid var(--line);
      background: var(--panel);
      overflow:hidden;
      box-shadow: var(--shadow2);
      transition: transform .18s var(--ease), border-color .18s var(--ease), background .18s var(--ease), filter .18s var(--ease);
    }
    .card:hover{
      transform: translateY(-2px);
      border-color: color-mix(in oklab, var(--gold) 30%, var(--line) 70%);
      background: color-mix(in oklab, var(--panel) 94%, white 6%);
      filter: brightness(1.02);
    }

    .media{
      width: calc(100% - 24px);
      height: 190px;
      border-radius: 14px;
      overflow:hidden;
      border: 1px solid var(--line2);
      background: color-mix(in oklab, var(--bg2) 60%, #000 40%);
      margin: 12px 12px 0;
      position:relative;
      isolation:isolate;
      user-select:none;
    }
    .media img{
      width:100%; height:100%;
      object-fit:cover;
      display:block;
      transform: scale(1.01);
      opacity:.95;
      transition: opacity .45s var(--ease), transform .7s var(--ease);
    }
    .media.is-fading img{ opacity:.18; transform: scale(1.03); }
    .media::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(to top, rgba(0,0,0,.32), rgba(0,0,0,0) 55%);
      pointer-events:none;
      z-index:1;
    }

    .media-nav{
      position:absolute; inset:0;
      display:flex; align-items:center; justify-content:space-between;
      padding: 0 10px;
      pointer-events:none;
      z-index:2;
    }
    .media-btn{
      width:34px; height:34px; border-radius:12px;
      background: rgba(0,0,0,0.35);
      border: 1px solid rgba(255,255,255,0.14);
      display:grid; place-items:center;
      color:#fff;
      pointer-events:auto;
      cursor:pointer;
      backdrop-filter: blur(6px);
      transition: transform .15s var(--ease), background .15s var(--ease), border-color .15s var(--ease);
    }
    .media-btn:hover{
      background: rgba(0,0,0,0.55);
      border-color: rgba(212,175,55,.30);
      transform: translateY(-1px);
    }
    .media-dots{
      position:absolute; left:0; right:0; bottom:10px;
      display:flex; justify-content:center; gap:6px;
      pointer-events:none;
      z-index:2;
    }
    .media-dot{
      width:7px; height:7px; border-radius:999px;
      background: rgba(255,255,255,0.35);
      border: 1px solid rgba(255,255,255,0.25);
    }
    .media-dot.active{ background: rgba(255,255,255,0.92); }

    .card-body{ padding: 12px; }
    .title{ font-weight: 950; margin: 2px 0 6px; letter-spacing:-0.2px; display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    /* ✅ Featured badge */
    .star{
      display:inline-flex; gap:6px; align-items:center;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(212,175,55,.28);
      background: rgba(212,175,55,.10);
      color: var(--gold2);
      font-weight: 900;
      font-size: .78rem;
      letter-spacing: .02em;
    }

    .desc{
      margin:0; color: var(--muted); line-height:1.45; font-size: .96rem;
      display:-webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow:hidden;
    }
    .price{ margin-top:10px; font-weight: 950; color: var(--gold2); letter-spacing: .1px; }
    .actions-row{ margin-top:12px; display:flex; gap:10px; flex-wrap:wrap; }
    .actions-row .btn{ flex: 1; }
    @media (max-width: 520px){ .actions-row .btn{ width:100%; flex:unset; } }

    .notice{
      border-radius: 16px;
      padding: 12px;
      border: 1px solid var(--line);
      background: var(--panel2);
      color: var(--muted);
    }
    .notice strong{ color: var(--text); }

    /* Toast */
    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      min-width: 220px;
      max-width: min(560px, calc(100vw - 28px));
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: color-mix(in oklab, var(--bg2) 88%, #000 12%);
      box-shadow: var(--shadow2);
      color: var(--text);
      display:none;
      z-index: 120;
    }
    .toast.show{ display:block; }

    /* Floating WhatsApp */
    .wa-float{
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 90;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .wa-pill{
      display:none;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: var(--panel);
      color: var(--text);
      font-weight: 950;
      box-shadow: var(--shadow2);
      backdrop-filter: blur(10px);
      cursor:pointer;
    }
    .wa-btn{
      width: 52px;
      height: 52px;
      border-radius: 18px;
      border: 1px solid color-mix(in oklab, var(--gold) 40%, var(--line) 60%);
      background: linear-gradient(180deg, var(--gold2), var(--gold));
      color: #111;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      box-shadow: var(--shadow2);
      cursor:pointer;
      transition: transform .16s var(--ease), filter .16s var(--ease);
    }
    .wa-btn:hover{ transform: translateY(-2px); filter: brightness(1.02); }
    .wa-btn i{ font-size: 20px; }
    @media (min-width: 980px){ .wa-pill{ display:inline-flex; } }
  </style>
</head>

<body data-page="logistics">
  <a class="skip" href="#main">Skip to content</a>

  <!-- Mobile nav -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="sheet" role="dialog" aria-label="Menu">
      <div class="sheet-head">
        <div class="sheet-brandline">
          <div class="logo-wrap" aria-hidden="true">
            <img src="assets/images/larmah-favicon.jpeg" alt="Larmah Enterprise" />
          </div>
          <div style="min-width:0">
            <div style="font-weight:950; line-height:1.1">Larmah Enterprise</div>
            <div style="color:var(--muted); font-weight:850; font-size:.92rem; margin-top:4px;">Real Estate • Logistics</div>
          </div>
        </div>

        <button class="icon-btn" type="button" onclick="toggleMenu(false)" aria-label="Close menu">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>

      <a href="index.html#about"><span><i class="fa-solid fa-circle-info" style="color:var(--gold)"></i> About</span><i class="fa-solid fa-chevron-right" style="opacity:.6"></i></a>
      <a href="real-estate.html"><span><i class="fa-solid fa-building" style="color:var(--gold)"></i> Real Estate</span><i class="fa-solid fa-chevron-right" style="opacity:.6"></i></a>
      <a href="logistics.html"><span><i class="fa-solid fa-truck-fast" style="color:var(--gold)"></i> Logistics</span><i class="fa-solid fa-check" style="opacity:.9"></i></a>
      <a href="premium.html"><span><i class="fa-solid fa-crown" style="color:var(--gold)"></i> Premium</span><i class="fa-solid fa-chevron-right" style="opacity:.6"></i></a>

      <div class="sheet-actions">
        <button class="btn primary" type="button" onclick="toggleTheme()" aria-label="Toggle light or dark theme">
          <i class="fa-solid fa-circle-half-stroke"></i> Toggle Theme
        </button>
        <button class="btn solid" type="button" onclick="openWA(buildMsg('Logistics Support', { Message:'Hello Larmah, I need logistics support.' }))">
          <i class="fa-brands fa-whatsapp"></i> WhatsApp
        </button>
      </div>
    </div>
  </div>

  <header>
    <div class="container header-inner">
      <a class="brand" href="index.html#home" aria-label="Back to Index">
        <div class="logo-wrap" aria-hidden="true">
          <img src="assets/images/larmah-favicon.jpeg" alt="Larmah Enterprise" />
        </div>
        <div class="btxt">
          <div class="bname">Larmah Enterprise</div>
          <div class="bsub">Real Estate • Logistics</div>
        </div>
      </a>

      <nav aria-label="Primary navigation">
        <ul>
          <li><a class="nav-link" href="index.html#about">About</a></li>
          <li><a class="nav-link" href="real-estate.html">Real Estate</a></li>
          <li><a class="nav-link active" href="logistics.html">Logistics</a></li>
          <li><a class="nav-link" href="premium.html">Premium</a></li>
        </ul>
      </nav>

      <div class="header-actions">
        <button class="icon-btn" type="button" onclick="toggleTheme()" aria-label="Toggle theme" title="Toggle theme">
          <i class="fa-solid fa-circle-half-stroke"></i>
        </button>

        <button class="menu-btn" type="button" onclick="toggleMenu(true)" aria-label="Open menu">
          <i class="fa-solid fa-bars"></i>
        </button>
      </div>
    </div>
  </header>

  <main id="main" class="container page-wrap" tabindex="-1">
    <section class="hero" aria-label="Logistics hero">
      <div class="hero-grid">
        <div>
          <div class="kicker">
            <span><i class="fa-solid fa-truck-fast" style="color:var(--gold)"></i> Fast dispatch</span><span class="dot">•</span>
            <span><i class="fa-solid fa-shield-halved" style="color:var(--gold)"></i> Trusted movement</span><span class="dot">•</span>
            <span><i class="fa-brands fa-whatsapp" style="color:var(--good)"></i> WhatsApp-first</span>
          </div>

          <h1>Trusted <span class="gold">Logistics</span> across Nigeria.</h1>
          <p class="lead">Dispatch, pickups, haulage, and movement coordination — with clean references and clear confirmations.</p>

          <div class="hero-actions">
            <a class="btn solid" href="#services"><i class="fa-solid fa-list-check"></i> Browse Services</a>
            <a class="btn primary" href="#quote"><i class="fa-solid fa-receipt"></i> Request Quote</a>
            <button class="btn ghost" type="button" onclick="openWA(buildMsg('Logistics Support', { Message:'Hello Larmah, I need logistics support.' }))">
              <i class="fa-brands fa-whatsapp"></i> WhatsApp Support
            </button>
          </div>

          <div class="meta">
            <span class="pill"><i class="fa-solid fa-shield-halved" style="color:var(--gold)"></i> Trust-first</span>
            <span class="pill"><i class="fa-solid fa-clock" style="color:var(--gold)"></i> Fast response</span>
            <span class="pill"><i class="fa-solid fa-star" style="color:var(--gold)"></i> Featured sync</span>
          </div>
        </div>

        <aside class="hero-media" id="heroMedia" aria-label="Logistics showcase">
          <img id="heroImg" src="https://source.unsplash.com/1600x1000/?logistics,delivery,truck&sig=710" alt="Logistics showcase" decoding="async" fetchpriority="high">
          <div class="cap">
            <div class="hero-tag" id="heroTag"><i class="fa-solid fa-truck-fast" style="color:var(--gold)"></i> Logistics</div>
            <div class="hero-sub" id="heroSub">Dispatch, haulage, and trusted coordination.</div>
          </div>
          <div class="hero-progress" aria-hidden="true"><div class="hero-bar" id="heroBar"></div></div>
        </aside>
      </div>
    </section>

    <section class="section" id="services" aria-label="Logistics Services">
      <div class="section-head">
        <div>
          <h2>Services</h2>
          <p class="subhead">Filter by service type, coverage, and Featured (same as homepage).</p>
        </div>
        <a class="btn small primary" href="premium.html"><i class="fa-solid fa-crown"></i> Priority Handling</a>
      </div>

      <div class="filters" aria-label="Filters">
        <div class="filters-grid">
          <div class="field">
            <label for="lg_q">Search</label>
            <input id="lg_q" placeholder="Dispatch, airport pickup, haulage..." autocomplete="off" />
          </div>

          <div class="field">
            <label for="lg_type">Service Type</label>
            <select id="lg_type">
              <option value="all" selected>All</option>
              <option value="dispatch">Dispatch</option>
              <option value="haulage">Haulage</option>
              <option value="pickup">Pickup</option>
              <option value="airport">Airport</option>
              <option value="interstate">Interstate</option>
              <option value="escort">Escort</option>
            </select>
          </div>

          <div class="field">
            <label for="lg_cov">Coverage</label>
            <select id="lg_cov">
              <option value="all" selected>Any</option>
              <option value="Lagos">Lagos</option>
              <option value="Abuja">Abuja</option>
              <option value="Port Harcourt">Port Harcourt</option>
              <option value="Interstate">Interstate</option>
              <option value="Nationwide">Nationwide</option>
            </select>
          </div>

          <div class="field">
            <label for="lg_sort">Sort</label>
            <select id="lg_sort">
              <option value="new" selected>Newest</option>
              <option value="az">Title A–Z</option>
              <option value="za">Title Z–A</option>
            </select>
          </div>

          <!-- ✅ Featured filter -->
          <div class="field">
            <label for="lg_feat">Featured</label>
            <select id="lg_feat">
              <option value="all" selected>All</option>
              <option value="featured">Featured only</option>
            </select>
          </div>
        </div>

        <div class="pillbar" aria-label="Quick filters">
          <button class="btn small" type="button" onclick="lgQuick('Dispatch')">Dispatch</button>
          <button class="btn small" type="button" onclick="lgQuick('Haulage')">Haulage</button>
          <button class="btn small" type="button" onclick="lgQuick('Airport')">Airport</button>
          <button class="btn small" type="button" onclick="lgSetType('interstate')">Interstate</button>
          <button class="btn small" type="button" onclick="lgSetCoverage('Lagos')">Lagos</button>

          <!-- ✅ Featured quick -->
          <button class="btn small" type="button" onclick="lgSetFeatured(true)">
            <i class="fa-solid fa-star" style="color:var(--gold)"></i> Featured
          </button>

          <button class="btn small" type="button" onclick="lgReset()" style="color:var(--bad);border-color:color-mix(in oklab, var(--bad) 30%, var(--line) 70%)">
            <i class="fa-solid fa-rotate-left"></i> Reset
          </button>
        </div>
      </div>

      <div id="lg_mount">
        <div class="notice">Loading active logistics services…</div>
      </div>
    </section>

    <section class="section" id="quote" aria-label="Request a Quote">
      <div class="section-head">
        <div>
          <h2>Request a Quote</h2>
          <p class="subhead">Share pickup + dropoff + item details for fast pricing.</p>
        </div>
      </div>

      <div class="filters" style="padding:16px;">
        <div class="filters-grid" style="grid-template-columns: repeat(4, minmax(0, 1fr));">
          <div class="field" style="grid-column: span 2;">
            <label for="q_name">Name</label>
            <input id="q_name" placeholder="Full name" autocomplete="name" />
          </div>
          <div class="field" style="grid-column: span 2;">
            <label for="q_phone">WhatsApp Number</label>
            <input id="q_phone" placeholder="+234..." inputmode="tel" autocomplete="tel" />
          </div>

          <div class="field" style="grid-column: span 2;">
            <label for="q_pick">Pickup Location</label>
            <input id="q_pick" placeholder="Pickup address / area" autocomplete="street-address" />
          </div>
          <div class="field" style="grid-column: span 2;">
            <label for="q_drop">Dropoff Location</label>
            <input id="q_drop" placeholder="Dropoff address / area" autocomplete="street-address" />
          </div>

          <div class="field">
            <label for="q_service">Service</label>
            <select id="q_service">
              <option value="Dispatch">Dispatch</option>
              <option value="Pickup">Pickup</option>
              <option value="Airport Pickup">Airport Pickup</option>
              <option value="Haulage">Haulage</option>
              <option value="Interstate">Interstate</option>
              <option value="Escort">Escort</option>
            </select>
          </div>
          <div class="field">
            <label for="q_date">Date/Time</label>
            <input id="q_date" placeholder="e.g., Today 4pm" autocomplete="off" />
          </div>
          <div class="field">
            <label for="q_item">Item Type</label>
            <input id="q_item" placeholder="Parcel, luggage, cargo..." autocomplete="off" />
          </div>
          <div class="field">
            <label for="q_weight">Weight/Size</label>
            <input id="q_weight" placeholder="e.g., 5kg / medium" autocomplete="off" />
          </div>

          <div class="field" style="grid-column: span 4;">
            <label for="q_notes">Notes</label>
            <textarea id="q_notes" placeholder="Fragile? Floor level? Special handling?"></textarea>
          </div>
        </div>

        <div class="pillbar" style="border-top:0; margin-top:12px; padding-top:0;">
          <button class="btn solid" type="button" onclick="sendLogisticsQuote()">
            <i class="fa-brands fa-whatsapp"></i> Send Quote Request
          </button>
          <a class="btn primary" href="premium.html"><i class="fa-solid fa-crown"></i> Go Premium</a>
          <a class="btn ghost" href="real-estate.html"><i class="fa-solid fa-building"></i> Browse Stays</a>
        </div>

        <div class="notice" style="margin-top:12px;">
          <strong>Tip:</strong> If you’re booking a shortlet, share your check-in time so we coordinate pickup/delivery smoothly.
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div class="footer-cta">
        <div>
          <h3>Fast dispatch. Clear confirmation. WhatsApp-first.</h3>
          <p>We coordinate movement — you stay in control.</p>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn solid" type="button" onclick="openWA(buildMsg('Logistics Support', { Message:'Hello Larmah, I need logistics support.' }))">
            <i class="fa-brands fa-whatsapp"></i> WhatsApp
          </button>
          <a class="btn primary" href="real-estate.html"><i class="fa-solid fa-building"></i> Real Estate</a>
          <a class="btn primary" href="premium.html"><i class="fa-solid fa-crown"></i> Premium</a>
        </div>
      </div>

      <div class="footer-grid">
        <div>
          <div class="brandline">
            <div class="logo-wrap" aria-hidden="true">
              <img src="assets/images/larmah-favicon.jpeg" alt="Larmah Enterprise" />
            </div>
            <div style="min-width:0;">
              <div class="brandname">Larmah Enterprise</div>
              <div class="tagline">Connecting People, Business & Possibilities • RC: 9127113</div>
            </div>
          </div>

          <div style="margin-top:10px; color:var(--muted); line-height:1.55;">
            Trusted logistics and verified real estate across Nigeria — with clean references and WhatsApp-first coordination.
          </div>

          <div class="social" aria-label="Social links">
            <a href="https://instagram.com/hey_larmah" aria-label="Instagram" title="Instagram"><i class="fa-brands fa-instagram"></i></a>
            <a href="https://x.com/heylarmah_tech" aria-label="X" title="X"><i class="fa-brands fa-x-twitter"></i></a>
            <a href="https://t.me/heylarmah_tech" aria-label="Telegram" title="Telegram"><i class="fa-brands fa-telegram"></i></a>
            <a href="https://youtube.com/@heylarmah" aria-label="YouTube" title="YouTube"><i class="fa-brands fa-youtube"></i></a>
          </div>
        </div>

        <div>
          <div class="footer-col-title">Quick Links</div>
          <div class="footer-links">
            <a href="index.html#about">About</a>
            <a href="real-estate.html">Real Estate</a>
            <a href="logistics.html">Logistics</a>
            <a href="premium.html">Premium</a>
          </div>
        </div>

        <div>
          <div class="footer-col-title">Contact</div>

          <div class="contact-stack">
            <div class="contact-chip">
              <i class="fa-brands fa-whatsapp"></i>
              <div>
                <div class="txt">+234 706 308 0605</div>
                <div class="sub">WhatsApp-first support</div>
              </div>
            </div>

            <div class="contact-chip">
              <i class="fa-regular fa-envelope"></i>
              <div>
                <div class="txt"><a href="mailto:business@heylarmah.tech">business@heylarmah.tech</a></div>
                <div class="sub">Business enquiries</div>
              </div>
            </div>

            <div class="contact-chip">
              <i class="fa-solid fa-location-dot"></i>
              <div>
                <div class="txt">Lagos, Nigeria</div>
                <div class="sub">Serving Nigeria nationwide</div>
              </div>
            </div>
          </div>

          <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn small solid" type="button" onclick="openWA(buildMsg('Dispatch Booking', { Message:'Hello Larmah, I want to book dispatch.' }))">
              <i class="fa-brands fa-whatsapp"></i> Book Now
            </button>
            <a class="btn small primary" href="real-estate.html">
              <i class="fa-solid fa-building"></i> Browse Stays
            </a>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <div>© <span id="year"></span> Larmah Enterprise. All rights reserved.</div>
      </div>
    </div>
  </footer>

  <!-- Floating WhatsApp -->
  <div class="wa-float" aria-label="Floating WhatsApp support">
    <button class="wa-pill" type="button" onclick="openWA(buildMsg('Logistics Support', { Message:'Hello Larmah, I need logistics support.' }))">
      WhatsApp Support
    </button>
    <button class="wa-btn" type="button" aria-label="Chat on WhatsApp" onclick="openWA(buildMsg('Logistics Support', { Message:'Hello Larmah, I need logistics support.' }))">
      <i class="fa-brands fa-whatsapp"></i>
    </button>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // ===== basics
    document.getElementById("year").textContent = new Date().getFullYear();
    const reduceMotion = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
    const esc = (s) => (s ?? "").toString().replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m]));

    function toast(msg){
      const t = document.getElementById("toast");
      if(!t) return;
      t.textContent = msg;
      t.classList.add("show");
      clearTimeout(window.__toastT);
      window.__toastT = setTimeout(() => t.classList.remove("show"), 2200);
    }

    // ===== theme (prefer app.js)
    const THEME_KEY = "larmah_theme_v6";
    function setTheme(theme){
      if(window.LARMAH?.setTheme) return window.LARMAH.setTheme(theme);
      document.documentElement.setAttribute("data-theme", theme);
      localStorage.setItem(THEME_KEY, theme);
      const metaTheme = document.querySelector('meta[name="theme-color"]');
      if(metaTheme) metaTheme.setAttribute("content", theme === "light" ? "#F7F7FB" : "#070A12");
    }
    function toggleTheme(){
      if(window.LARMAH?.toggleTheme) return window.LARMAH.toggleTheme();
      const cur = document.documentElement.getAttribute("data-theme") || "dark";
      setTheme(cur === "dark" ? "light" : "dark");
    }
    (function initTheme(){
      try{
        const saved = localStorage.getItem(THEME_KEY);
        if(saved === "light" || saved === "dark"){ setTheme(saved); return; }
      }catch{}
      const prefersLight = window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches;
      setTheme(prefersLight ? "light" : "dark");
    })();

    // ===== mobile menu
    const overlay = document.getElementById("overlay");
    function toggleMenu(open){
      overlay.classList.toggle("open", !!open);
      overlay.setAttribute("aria-hidden", open ? "false" : "true");
    }
    overlay.addEventListener("click", (e) => { if(e.target === overlay) toggleMenu(false); });

    // ===== WA helpers
    function buildMsg(title, data){
      if(window.LARMAH?.buildMessage) return LARMAH.buildMessage(title, data);
      const lines = [title, ""];
      for(const [k,v] of Object.entries(data || {})){
        const val = (v ?? "").toString().trim();
        if(val) lines.push(`${k}: ${val}`);
      }
      return lines.join("\n");
    }
    function openWA(text){
      if(window.LARMAH?.openWhatsApp) return LARMAH.openWhatsApp(text);
      const phone = "2347063080605";
      window.open(`https://wa.me/${phone}?text=${encodeURIComponent(text)}`, "_blank", "noopener,noreferrer");
    }

    // ===== hero slideshow (5s)
    const heroMedia = document.getElementById("heroMedia");
    const heroImg = document.getElementById("heroImg");
    const heroTag = document.getElementById("heroTag");
    const heroSub = document.getElementById("heroSub");
    const heroBar = document.getElementById("heroBar");

    const HERO_SLIDES = [
      { img:"https://source.unsplash.com/1600x1000/?delivery,courier,city&sig=901", icon:"fa-truck-fast", label:"Dispatch", sub:"Fast dispatch across major cities." },
      { img:"https://source.unsplash.com/1600x1000/?warehouse,logistics,packages&sig=902", icon:"fa-boxes-stacked", label:"Coordination", sub:"Clear confirmations and references." },
      { img:"https://source.unsplash.com/1600x1000/?cargo,truck,highway&sig=903", icon:"fa-truck-ramp-box", label:"Haulage", sub:"Trusted haulage for heavy movement." },
      { img:"https://source.unsplash.com/1600x1000/?airport,transport,car&sig=904", icon:"fa-plane-arrival", label:"Airport Pickup", sub:"Pickup coordination for guests and teams." },
      { img:"https://source.unsplash.com/1600x1000/?shipping,container,port&sig=905", icon:"fa-ship", label:"Interstate", sub:"Interstate and nationwide delivery options." },
      { img:"https://source.unsplash.com/1600x1000/?motorbike,delivery,africa&sig=906", icon:"fa-motorcycle", label:"Last Mile", sub:"Last-mile delivery with tracking updates." }
    ];
    let heroIdx = 0;

    function runHeroProgress(){
      if(!heroBar) return;
      heroBar.classList.remove("run");
      void heroBar.offsetWidth;
      heroBar.classList.add("run");
    }
    function setHero(i){
      const s = HERO_SLIDES[i % HERO_SLIDES.length];
      if(!heroMedia || !heroImg || !heroTag || !heroSub) return;
      heroMedia.classList.add("is-fading");
      runHeroProgress();
      setTimeout(() => {
        heroImg.src = s.img;
        heroImg.alt = s.label;
        heroTag.innerHTML = `<i class="fa-solid ${s.icon}" style="color:var(--gold)"></i> ${esc(s.label)}`;
        heroSub.textContent = s.sub;
        setTimeout(() => heroMedia.classList.remove("is-fading"), 120);
      }, 220);
    }
    if(!reduceMotion){
      setHero(0);
      setInterval(() => { heroIdx=(heroIdx+1)%HERO_SLIDES.length; setHero(heroIdx); }, 5000);
    } else setHero(0);

    // ===== Supabase services (SYNCED WITH FEATURED)
    const __LG = { items: [] };

    function sbClient(){
      return window.supabaseClient || (window.ensureSupabaseClient && window.ensureSupabaseClient()) || null;
    }
    async function waitForSB({tries=14, delay=250}={}){
      for(let i=0;i<tries;i++){
        const sb = sbClient();
        if(sb) return sb;
        await new Promise(r=>setTimeout(r, delay));
      }
      return null;
    }

    function safeText(v){ return (v === null || v === undefined) ? "" : String(v); }
    function formatPrice(raw){ const s = safeText(raw).trim(); return s ? s : "Contact for quote"; }

    function inferType(it){
      const hay = (safeText(it.service_type) + " " + safeText(it.type) + " " + safeText(it.title) + " " + safeText(it.description) + " " + safeText((it.tags||[]).join(" "))).toLowerCase();
      if(hay.includes("haul")) return "haulage";
      if(hay.includes("airport")) return "airport";
      if(hay.includes("interstate") || hay.includes("nationwide")) return "interstate";
      if(hay.includes("escort")) return "escort";
      if(hay.includes("pickup")) return "pickup";
      if(hay.includes("dispatch") || hay.includes("delivery") || hay.includes("courier")) return "dispatch";
      return "";
    }
    function inferCoverage(it){
      return safeText(it.coverage || it.location || it.area || it.city || it.state || "").trim();
    }
    function listingRef(id){ return `WEB-LG-${id}`; }

    function pickImage(it){
      const arr = Array.isArray(it.image_urls) ? it.image_urls.filter(Boolean) : [];
      if(arr.length) return arr[0];
      if(it.image_url) return it.image_url;
      return "assets/images/larmah-header.jpeg";
    }

    function cardHTML(it){
      const id = String(it.id);
      const title = safeText(it.title) || "Logistics Service";
      const desc = safeText(it.description) || "Trusted logistics support.";
      const price = formatPrice(it.price);
      const coverage = inferCoverage(it) || "Nigeria";
      const stype = inferType(it) || "service";
      const ref = listingRef(id);
      const img = pickImage(it);
      const isFeatured = it.featured === true;

      return `
        <article class="card" aria-label="${esc(title)}">
          <div class="media">
            <img src="${esc(img)}" alt="${esc(title)}" loading="lazy" decoding="async" onerror="this.src='assets/images/larmah-header.jpeg'">
          </div>

          <div class="card-body">
            <div class="title">
              ${esc(title)}
              ${isFeatured ? `<span class="star"><i class="fa-solid fa-star"></i> Featured</span>` : ``}
            </div>

            <p class="desc">${esc(desc)}</p>

            <div class="price">${esc(price)}</div>

            <div class="meta">
              <span class="pill"><i class="fa-solid fa-route" style="color:var(--gold)"></i> ${esc(coverage)}</span>
              <span class="pill"><i class="fa-solid fa-tag" style="color:var(--gold)"></i> ${esc(stype)}</span>
              <span class="pill"><i class="fa-solid fa-hashtag" style="color:var(--gold)"></i> <span class="mono">${esc(ref)}</span></span>
            </div>

            <div class="actions-row">
              <button class="btn small solid" type="button" onclick="lgEnquire('${id}')">
                <i class="fa-brands fa-whatsapp"></i> Enquire
              </button>
              <button class="btn small primary" type="button" onclick="lgEmail('${id}')">
                <i class="fa-regular fa-envelope"></i> Email
              </button>
            </div>
          </div>
        </article>
      `;
    }

    function renderLogistics(){
      const mount = document.getElementById("lg_mount");
      const q = safeText(document.getElementById("lg_q").value).toLowerCase().trim();
      const type = document.getElementById("lg_type").value;
      const cov = document.getElementById("lg_cov").value;
      const sort = document.getElementById("lg_sort").value;
      const feat = document.getElementById("lg_feat").value;

      let items = (__LG.items || []).slice();

      if(q){
        items = items.filter(it => {
          const hay = (safeText(it.title) + " " + safeText(it.description) + " " + safeText((it.tags||[]).join(" ")) + " " + safeText(inferCoverage(it))).toLowerCase();
          return hay.includes(q);
        });
      }
      if(type !== "all") items = items.filter(it => inferType(it) === type);
      if(cov !== "all") items = items.filter(it => safeText(inferCoverage(it)).toLowerCase().includes(cov.toLowerCase()));
      if(feat === "featured") items = items.filter(it => it.featured === true);

      if(sort === "az") items.sort((a,b)=> safeText(a.title).localeCompare(safeText(b.title)));
      else if(sort === "za") items.sort((a,b)=> safeText(b.title).localeCompare(safeText(a.title)));
      else items.sort((a,b)=> new Date(b.created_at||0) - new Date(a.created_at||0));

      if(!items.length){
        mount.innerHTML = `<div class="notice"><strong>No matches found.</strong> Try adjusting filters or request a quote below.</div>`;
        return;
      }

      mount.innerHTML = `<div class="grid">${items.map(cardHTML).join("")}</div>`;
    }

    function lgQuick(word){
      const el = document.getElementById("lg_q");
      el.value = (el.value ? el.value + " " : "") + word;
      renderLogistics();
    }
    function lgSetType(v){ document.getElementById("lg_type").value = v; renderLogistics(); }
    function lgSetCoverage(v){ document.getElementById("lg_cov").value = v; renderLogistics(); }
    function lgSetFeatured(on){
      document.getElementById("lg_feat").value = on ? "featured" : "all";
      renderLogistics();
    }
    function lgReset(){
      document.getElementById("lg_q").value = "";
      document.getElementById("lg_type").value = "all";
      document.getElementById("lg_cov").value = "all";
      document.getElementById("lg_sort").value = "new";
      document.getElementById("lg_feat").value = "all";
      renderLogistics();
    }
    window.lgQuick = lgQuick;
    window.lgSetType = lgSetType;
    window.lgSetCoverage = lgSetCoverage;
    window.lgSetFeatured = lgSetFeatured;
    window.lgReset = lgReset;

    function lgEnquire(id){
      const it = (__LG.items||[]).find(x => String(x.id)===String(id));
      if(!it) return;

      openWA(buildMsg("Logistics Enquiry", {
        Ref: listingRef(id),
        Service: safeText(it.title),
        Coverage: inferCoverage(it) || "",
        Type: inferType(it) || "",
        Quote: formatPrice(it.price),
        Featured: it.featured === true ? "Yes" : "No",
        Message: "Hello Larmah, please confirm availability and cost."
      }));
    }
    function lgEmail(id){
      const it = (__LG.items||[]).find(x => String(x.id)===String(id));
      if(!it) return;

      const BUSINESS_EMAIL = "business@heylarmah.tech";
      const subject = `Logistics Enquiry — ${listingRef(id)} — ${safeText(it.title) || "Service"}`;
      const body =
`Hello Larmah Team,

I’m interested in this logistics service:

Ref: ${listingRef(id)}
Service: ${safeText(it.title)}
Coverage: ${inferCoverage(it) || ""}
Type: ${inferType(it) || ""}
Quote: ${formatPrice(it.price)}
Featured: ${it.featured === true ? "Yes" : "No"}

My Name:
My Phone:
Pickup:
Dropoff:
Date/Time:
Notes:

Thank you.`;
      window.location.href = `mailto:${encodeURIComponent(BUSINESS_EMAIL)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    }
    window.lgEnquire = lgEnquire;
    window.lgEmail = lgEmail;

    async function loadLogistics(){
      const mount = document.getElementById("lg_mount");
      mount.innerHTML = `<div class="notice">Loading active logistics services…</div>`;

      try{
        const sb = await waitForSB();
        if(!sb) throw new Error("Supabase not ready. Ensure assets/js/app.js has your SUPABASE_URL + SUPABASE_ANON_KEY.");

        // ✅ include featured + sort_rank to sync with index featured rules
        const { data, error } = await sb
          .from("listings")
          .select("id,title,description,price,image_url,image_urls,coverage,location,area,city,state,service_type,type,tags,category,status,featured,sort_rank,created_at")
          .eq("category", "logistics")
          .eq("status", "active")
          .order("created_at", { ascending: false })
          .limit(200);

        if(error) throw error;

        __LG.items = data || [];
        if(!__LG.items.length){
          mount.innerHTML = `<div class="notice"><strong>No active services currently.</strong> Please request a quote below.</div>`;
          return;
        }

        renderLogistics();

        if(window.LARMAH?.realtime?.subscribe){
          LARMAH.realtime.subscribe("listings", () => loadLogistics(), "lg-page", { debounceMs: 800 });
        }
      } catch(err){
        console.error(err);
        mount.innerHTML = `<div class="notice" style="border-color:color-mix(in oklab, var(--bad) 30%, var(--line) 70%)">
          <strong>Could not load services.</strong> Please refresh or try again later.
        </div>`;
      }
    }

    async function sendLogisticsQuote(){
      const fields = {
        Name: document.getElementById("q_name").value.trim(),
        Phone: document.getElementById("q_phone").value.trim(),
        Pickup: document.getElementById("q_pick").value.trim(),
        Dropoff: document.getElementById("q_drop").value.trim(),
        Service: document.getElementById("q_service").value,
        DateTime: document.getElementById("q_date").value.trim(),
        Item: document.getElementById("q_item").value.trim(),
        WeightSize: document.getElementById("q_weight").value.trim(),
        Notes: document.getElementById("q_notes").value.trim()
      };

      if(!fields.Name || !fields.Phone){
        toast("Name and WhatsApp number are required.");
        return;
      }

      if(window.LARMAH?.submitRequest){
        await LARMAH.submitRequest({
          header: "New Logistics Quote Request",
          category: "logistics",
          fields,
          refPrefix: "LG"
        });
        toast("Submitted. We’ll respond on WhatsApp.");
        return;
      }

      openWA(buildMsg("Logistics Quote Request", fields));
    }
    window.sendLogisticsQuote = sendLogisticsQuote;

    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("lg_q")?.addEventListener("input", renderLogistics);
      document.getElementById("lg_type")?.addEventListener("change", renderLogistics);
      document.getElementById("lg_cov")?.addEventListener("change", renderLogistics);
      document.getElementById("lg_sort")?.addEventListener("change", renderLogistics);
      document.getElementById("lg_feat")?.addEventListener("change", renderLogistics);
      loadLogistics();
    });

    // expose
    window.toggleMenu = toggleMenu;
    window.toggleTheme = toggleTheme;
  </script>

  <script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015"
    integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ=="
    data-cf-beacon='{"version":"2024.11.0","token":"d59085ad970f4cac8c9e0279fe03c627","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}'
    crossorigin="anonymous"></script>
</body>
</html>
